<div>
  <button class="btn btn-sm" [routerLink]="['/user-management']">
    <i class="fa fa-arrow-left" aria-hidden="true"></i>
  </button>
</div>

<div class="bg-white p-4 shadow-sm rounded">
  <div class="d-flex justify-content-center">
    <form class="col-md-12 col-lg-10 mt-5" [formGroup]="myform">
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputEmail4">Name</label>
          <input
            type="text"
            class="form-control"
            id="inputEmail4"
            value="{{ userDetails?.name }}"
            formControlName="name"
          />
        </div>
        <div class="form-group col-md-6">
          <label for="inputEmail4">Display Name</label>
          <input
            type="text"
            class="form-control"
            id="inputEmail4"
            value="{{ userDetails?.display_title }}"
            formControlName="display_title"
          />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="email">Email ID</label>
          <input
            type="email"
            class="form-control"
            id="email"
            value="{{ userDetails?.email }}"
            formControlName="email"
          />
        </div>
        <div class="form-group col-md-6">
          <label for="inputEmail4">Whatsapp Number</label>
          <input
            type="number"
            class="form-control"
            id="phonenumber"
            value="{{ userDetails?.phone }}"
            formControlName="phone"
          />
        </div>
      </div>

      <div class="form-row my-3">
        <div class="form-group col-md-6">
          <label for="password">Password</label>
          <input
            type="text"
            class="form-control"
            id="password"
            value="{{ userDetails?.password }}"
            formControlName="password"
          />
        </div>
        <div class="col-md-3 col-lg-3">
          <label class="">Roles</label>
          <div *ngIf="mode === 'view'; then roleView; else role"></div>
          <ng-template #roleView>
            <div class="form-group">
              <input
                type="text"
                class="form-control form-group"
                id="password"
                value="{{ userDetails?.user_type?.title }}"
                formControlName="role"
              />
            </div>
          </ng-template>
          <ng-template #role>
            <ng-select
              [items]="roleList"
              bindLabel="title"
              placeholder="Roles"
              class="form-group custom-ht"
              formControlName="role"
              [(ngModel)]="selectedRoleList"
            >
            </ng-select>
          </ng-template>
        </div>

        <div class="form-group col-md-3 col-lg-3">
          <label for="inputEmail4">Madhab</label>
          <div *ngIf="mode === 'view'; then madhabView; else madhab"></div>
          <ng-template #madhabView>
            <div class="form-group">
              <input
                type="text"
                class="form-control form-group"
                id="password"
                value="{{ userDetails?.madhab?.title }}"
                formControlName="madhab"
              />
            </div>
          </ng-template>
          <ng-template #madhab>
            <ng-select
              formControlName="madhab"
              [items]="madhabList"
              bindLabel="title"
              placeholder="Madhab"
              class="form-group custom-ht"
              [(ngModel)]="selectedMadhabList"
            >
            </ng-select>
          </ng-template>
        </div>
      </div>

      <div class="form-row my-3">
        <div class="form-group col-md-6 col-lg-6">
          <label for="address">Address</label>
          <input
            type="text"
            class="form-control"
            id="address"
            value="{{ userDetails?.address }}"
            formControlName="address"
          />
        </div>
        <div class="form-group col-md-6 col-lg-6">
          <label for="address">Street/Area</label>
          <input
            type="text"
            class="form-control"
            id="address"
            value="{{ userDetails?.street_address }}"
            formControlName="street_address"
          />
        </div>
        <div class="form-group col-md-6 col-lg-6">
          <label for="address">Pin Code</label>
          <input
            type="number"
            class="form-control"
            id="address"
            value="{{ userDetails?.pin_code }}"
            formControlName="pin_code"
            minlength="6"
            maxlength="6"
          />
        </div>

        <div class="form-group col-md-6 col-lg-6">
          <label for="inputEmail4">Active Status</label>

          <div *ngIf="mode === 'view'; then activeView; else active"></div>
          <ng-template #activeView>
            <div class="form-group">
              <input
                type="text"
                class="form-control form-group"
                id="password"
                value="{{ userDetails?.user_status?.status }}"
                formControlName="user_status"
              />
            </div>
          </ng-template>
          <ng-template #active>
            <ng-select
              [items]="activlist"
              bindLabel="status"
              placeholder="Active/Inactive"
              class="form-group custom-ht"
              formControlName="user_status"
              [(ngModel)]="selectedUseStatusList"
            >
            </ng-select>
          </ng-template>
        </div>
      </div>

      <div class="d-flex justify-content-end my-3">
        <button
          type="submit"
          class="btn btn-primary"
          *ngIf="mode === ''"
          (click)="handleSubmit()"
          [disabled]="myform.status !== 'VALID'"
        >
          Save
        </button>
        <button
          *ngIf="mode === 'edit'"
          type="submit"
          class="btn btn-primary"
          (click)="handleSubmit()"
        >
          Update
        </button>
      </div>
    </form>
  </div>
</div>
